<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warehouse Scanner - –°–∏—Å—Ç–µ–º–∞ —É—á—ë—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üì¶ Warehouse Management System</h1>
            <p class="subtitle">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –ª–æ–∫–∞—Ü–∏–π</p>
        </header>

        <!-- Auth Section -->
        <section class="auth-section" id="authSection">
            <h2>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
            <div class="form-group">
                <input type="text" id="username" placeholder="–õ–æ–≥–∏–Ω: operator1" value="operator1" class="form-control">
            </div>
            <div class="form-group">
                <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å: password123" value="password123" class="form-control">
            </div>
            <button class="btn btn-primary" onclick="login()">üîê –í–æ–π—Ç–∏</button>
            <div id="authMessage" class="message"></div>
        </section>

        <!-- Scanner Section (hidden until logged in) -->
        <section class="scanner-section" id="scannerSection" style="display: none;">
            <!-- User Info -->
            <div class="user-info">
                <span>üë§ –û–ø–µ—Ä–∞—Ç–æ—Ä: <strong id="currentUser"></strong></span>
                <button class="btn btn-small" onclick="logout()">–í—ã—Ö–æ–¥</button>
            </div>

            <!-- Scanner Mode Selector -->
            <div class="mode-selector">
                <button class="btn btn-mode" id="modeItem" onclick="switchMode('item')">üì¶ –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä</button>
                <button class="btn btn-mode" id="modeLocation" onclick="switchMode('location')">üìç –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞—Ü–∏—é</button>
                <button class="btn btn-mode" id="modeScan" onclick="switchMode('scan')" style="display: none;">‚úÖ –†—ë–±—Ä–∞</button>
            </div>

            <!-- Camera Container -->
            <div class="camera-container">
                <video id="cameraFeed" class="camera-feed" playsinline autoplay muted></video>
                <canvas id="scanner" class="scanner-canvas" style="display: none;"></canvas>
                <div class="scanner-overlay">
                    <div class="scanner-frame"></div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <button class="btn btn-scan" id="startButton" onclick="startCamera()">‚ñ∂Ô∏è –û—Ç–∫—Ä—ã—Ç—å –∫–∞–º–µ—Ä—É</button>
                <button class="btn btn-stop" id="stopButton" onclick="stopCamera()" style="display: none;">‚èπÔ∏è –ó–∞–∫—Ä—ã—Ç—å –∫–∞–º–µ—Ä—É</button>
            </div>

            <!-- Scanned Data -->
            <div class="scanned-data">
                <div class="data-item">
                    <label>–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä:</label>
                    <div class="data-value" id="scannedItem">‚Äî</div>
                </div>
                <div class="data-item">
                    <label>–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è:</label>
                    <div class="data-value" id="scannedLocation">‚Äî</div>
                </div>
                <div class="data-item">
                    <label>–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:</label>
                    <div class="data-value" id="currentStatus">–û–∂–∏–¥–∞–Ω–∏–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è...</div>
                </div>
            </div>

            <!-- Item Info -->
            <div id="itemInfoContainer" class="info-container" style="display: none;">
                <h3>üì¶ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ</h3>
                <div class="info-grid">
                    <div><strong>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ:</strong> <span id="itemName"></span></div>
                    <div><strong>SKU:</strong> <span id="itemSku"></span></div>
                    <div><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</strong> <span id="itemQuantity"></span></div>
                    <div><strong>–¢–µ–∫—É—â–∞—è –ª–æ–∫–∞—Ü–∏—è:</strong> <span id="itemLocation"></span></div>
                </div>
            </div>

            <!-- Confirm Action -->
            <div id="confirmContainer" class="confirm-container" style="display: none;">
                <h3>‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è</h3>
                <div class="confirm-details">
                    <div><strong>–¢–æ–≤–∞—Ä:</strong> <span id="confirmItem"></span></div>
                    <div><strong>–ò–∑ –ª–æ–∫–∞—Ü–∏–∏:</strong> <span id="confirmFromLocation"></span></div>
                    <div><strong>–í –ª–æ–∫–∞—Ü–∏—é:</strong> <span id="confirmToLocation"></span></div>
                </div>
                <div class="form-group">
                    <textarea id="notes" placeholder="–ü—Ä–∏–º–µ—á–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)" class="form-control"></textarea>
                </div>
                <div class="button-group">
                    <button class="btn btn-success" onclick="confirmMove()">‚úì –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                    <button class="btn btn-cancel" onclick="resetScan()">‚úó –û—Ç–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>

            <!-- Recent Moves -->
            <div id="recentMovesContainer" class="recent-moves" style="display: none;">
                <h3>üìä –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏</h3>
                <div id="movesList" class="moves-list"></div>
            </div>

            <!-- Messages -->
            <div id="message" class="message"></div>
        </section>
    </div>

    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
    <script src="/js/scanner.js"></script>
</body>
</html>
